<!DOCTYPE html>
<html lang="en">
<head>
  <title>TSAS Official</title>
  <link rel="stylesheet" type="text/css" href="../style.css">
  <link rel="shortcut icon" type="image/png" href="../images/favicon.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Angkor&family=Belanosima&display=swap" rel="stylesheet">
  <script src="../script.js"></script>
  <script src="https://tsasofficial.github.io/members/header.js"></script>
  <script defer src="../popupscript/script.js"></script>
</head>
<body>
  <header id="header"></header>
  <div class="center">
    <center>
      <div class="title_font">
        <font size="6">Welcome</font>
        <font size="6" id="name"></font><font size="6">!</font>
      </div>

      <img class="fully-rounded-img" width="100" height="100" id="profilePicture" alt="Profile picture"/>
      <script>
        const name = getCookie("username");
        if (!name) {
          if (window.self === window.top) {
            window.location.href = "https://tsasofficial.github.io/login";
          }
        } else {
          document.getElementById("name").innerText = " " + name;
        }

        const element = document.getElementById("profilePicture");
        let pictureCookie = getCookie("picture");

        if (!pictureCookie || pictureCookie === "null" || pictureCookie === "undefined") {
          element.src = "../images/DefaultProfilePicture.png";
        } else {
          try {
            // decode safely even for base64
            const picDecoded = decodeURIComponent(pictureCookie);
            if (picDecoded.startsWith("data:image/")) {
              element.src = picDecoded;
            } else {
              element.src = picDecoded;
            }
          } catch (e) {
            console.error("Invalid picture data:", e);
            element.src = "../images/DefaultProfilePicture.png";
          }
        }

        element.onerror = () => {
          element.onerror = null;
          element.src = "../images/DefaultProfilePicture.png";
        };
      </script>

      <br><br>
      <div class="normal_font">
        <font size="5">Access all T.S.A.S.'s entertainment videos, shows, and more from this website!</font>
      </div>
      <br><br><br>
      <a target="_blank" href="https://www.youtube.com/@TSASOfficial69"><button class="button button"><div class="normal_font"><font size="4">Official YT Channel</font></div></button></a>
      <br><br>
      <a href='theshow'><button class="button button"><div class="normal_font"><font size="4">Shows</font></div></button></a>
      <br><br>
      <a href='fanart'><button class="button button"><div class="normal_font"><font size="4">Fan Art</font></div></button></a>
      <br><br>
      <a href='downloads'><button class="button button"><div class="normal_font"><font size="4">Downloads</font></div></button></a>
      <br><br>
      <a href="settings"><button class="button button"><div class="normal_font"><font size="4">Settings</font></div></button></a>
      <br><br>
    </center>
  </div>
</body>
</html>
